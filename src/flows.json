[{"id":"15ccbe67.400542","type":"tab","label":"Unlock flow","disabled":false,"info":""},{"id":"a6144cd7.245b5","type":"tab","label":"Database","disabled":false,"info":""},{"id":"638c2b11.43050c","type":"websocket in","z":"15ccbe67.400542","name":"App input","server":"","client":"","x":110,"y":350,"wires":[["1af49277.70e7c6"]]},{"id":"b4778f4d.b291a","type":"function","z":"15ccbe67.400542","name":"Authentication","func":"\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":300,"wires":[["b5b5793e.d6e178"]]},{"id":"b5b5793e.d6e178","type":"function","z":"15ccbe67.400542","name":"Convert payload","func":"\nreturn msg;","outputs":1,"noerr":0,"x":680,"y":650,"wires":[["827e682c.8a4fb","2844ce0c.1b4a12"]]},{"id":"827e682c.8a4fb","type":"websocket out","z":"15ccbe67.400542","name":"Response on app","server":"","client":"","x":990,"y":700,"wires":[]},{"id":"acf5e8f0.1e61d8","type":"comment","z":"15ccbe67.400542","name":"Sends lockID and phoneID/userID","info":"","x":290,"y":100,"wires":[]},{"id":"8441e1af.0dd84","type":"comment","z":"15ccbe67.400542","name":"Check if IDs match in DB","info":"","x":910,"y":250,"wires":[]},{"id":"65801f82.c47d5","type":"comment","z":"15ccbe67.400542","name":"compress payload","info":"","x":690,"y":700,"wires":[]},{"id":"baaf9b8.7294768","type":"comment","z":"15ccbe67.400542","name":"Send unlock to device","info":"","x":1000,"y":550,"wires":[]},{"id":"51686373.0d1e44","type":"comment","z":"15ccbe67.400542","name":"Send response to app","info":"","x":1000,"y":750,"wires":[]},{"id":"2c2e8248.aa96ae","type":"websocket in","z":"a6144cd7.245b5","name":"New user","server":"","client":"","x":110,"y":250,"wires":[["3420a145.4e60be"]]},{"id":"3420a145.4e60be","type":"function","z":"a6144cd7.245b5","name":"Format ID","func":"\nreturn msg;","outputs":1,"noerr":0,"x":320,"y":250,"wires":[["3c8de1b2.652906"]]},{"id":"3c8de1b2.652906","type":"file","z":"a6144cd7.245b5","name":"","filename":"Save to DB","appendNewline":true,"createDir":false,"overwriteFile":"false","x":530,"y":250,"wires":[["7bba1e6c.581b1","844d6e33.75fe18"]]},{"id":"7bba1e6c.581b1","type":"debug","z":"a6144cd7.245b5","name":"Catch status","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":780,"y":200,"wires":[]},{"id":"844d6e33.75fe18","type":"function","z":"a6144cd7.245b5","name":"Format response","func":"\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":250,"wires":[["3f347d86.85d2e2"]]},{"id":"3f347d86.85d2e2","type":"websocket out","z":"a6144cd7.245b5","name":"Response app","server":"","client":"","x":1030,"y":250,"wires":[]},{"id":"ed04eb8c.94e698","type":"file in","z":"15ccbe67.400542","name":"","filename":"","format":"utf8","chunk":false,"sendError":false,"x":650,"y":300,"wires":[["b4778f4d.b291a"]]},{"id":"1af49277.70e7c6","type":"function","z":"15ccbe67.400542","name":"Format input","func":"\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":300,"wires":[["ed04eb8c.94e698"]]},{"id":"6a92177c.a20d5","type":"comment","z":"15ccbe67.400542","name":"Read DB","info":"","x":660,"y":250,"wires":[]},{"id":"3214875a.989d98","type":"ttn uplink","z":"15ccbe67.400542","name":"","dev_id":"","field":"","x":110,"y":250,"wires":[["1af49277.70e7c6","9a99c9bb.7b31c8"]]},{"id":"2844ce0c.1b4a12","type":"ttn downlink","z":"15ccbe67.400542","name":"","dev_id":"","port":"","confirmed":false,"schedule":"replace","x":970,"y":600,"wires":[]},{"id":"9a99c9bb.7b31c8","type":"debug","z":"15ccbe67.400542","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":370,"y":200,"wires":[]}]